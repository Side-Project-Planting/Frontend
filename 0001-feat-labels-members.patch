From 202dc320d5ad38b9d26bc0405b3996a14642059b Mon Sep 17 00:00:00 2001
From: hjy0951 <hjy0951@gmail.com>
Date: Thu, 19 Oct 2023 15:42:50 +0900
Subject: [PATCH] =?UTF-8?q?feat:=20labels=EC=99=80=20members=EB=A5=BC=20?=
 =?UTF-8?q?=EC=A0=84=EC=97=AD=EC=9C=BC=EB=A1=9C=20=EC=A0=80=EC=9E=A5?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 src/pages/Plan.tsx | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/src/pages/Plan.tsx b/src/pages/Plan.tsx
index 5e1e2a2..9778392 100644
--- a/src/pages/Plan.tsx
+++ b/src/pages/Plan.tsx
@@ -3,6 +3,7 @@ import React, { useEffect, useState, useRef } from 'react';
 import { CiSettings } from 'react-icons/ci';
 import { IoIosStarOutline } from 'react-icons/io';
 import { SlPlus } from 'react-icons/sl';
+import { useSetRecoilState } from 'recoil';
 import styled from 'styled-components';
 
 import { getPlanInfo } from '@apis';
@@ -10,6 +11,7 @@ import LabelFilter from '@components/LabelFilter';
 import MemberFilter from '@components/MemberFilter';
 import { Tab, TasksContainer } from '@components/Tab';
 import useModal from '@hooks/useModal';
+import { labelsState, membersState } from '@recoil/atoms';
 
 interface Label {
   id: number;
@@ -177,6 +179,8 @@ function Plan() {
   const inputRef = useRef<HTMLInputElement | null>(null);
   const { Modal, showModal, openModal, closeModal } = useModal();
   const [selectedLabels, setSelectedLabel] = useState<number[]>([]);
+  const setMembers = useSetRecoilState(membersState);
+  const setLabels = useSetRecoilState(labelsState);
 
   const sortTabsAndFilterPlanByLabels = (data: PlanType, labels: number[]) => {
     if (!data) {
@@ -215,6 +219,8 @@ function Plan() {
       try {
         const data = await getPlanInfo();
         const sortedTabsAndFilteredPlan = sortTabsAndFilterPlanByLabels(data, selectedLabels);
+        setMembers(sortedTabsAndFilteredPlan.members);
+        setLabels(sortedTabsAndFilteredPlan.labels);
         setPlan(sortedTabsAndFilteredPlan);
       } catch (error) {
         throw new Error('플랜 정보를 가져오는데 실패했습니다.');
-- 
2.41.0

